{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{% trans 'Update' %} {% trans 'Requests' %}{% endblock %}

{% block content %}

<div class="pt-4">

    <div class="tab-content user_management-content" id="pills-tabContent">
        <!-- Request Form -->
        <div class="tab-pane fade show active" id="pills-role" role="tabpanel" aria-labelledby="pills-role-tab">
            <form id="request_form" action="#" method="put">
                {% csrf_token %}

                <div class="employee-sheet-content custom-container bg-white pt-4" style="border-radius: 15px;">

                    <h2 class="container-fluid" style="font-weight: bold; color: #0A1629; font-size: 24px;"> {% trans 'Update' %} {% trans 'Requests' %}</h2>
                    <hr>

                    <div class="container-fluid">

                        <div class="row pb-4">
                            <div class="col-md-5">
                                <div class="mb-3">
                                    <label for="employee_duty" class="form-label pb-1">{% trans 'Employees' %}:</label>

                                    <div class="dropdown">
                                        <input value="{{custom_request.employee.username}}" type="text"
                                            class="form-control py-2" id="employee_duty" name="employee_duty"
                                            placeholder="{% trans 'Employees' %}"
                                            style="border-radius: 13px; background: transparent;" required readonly>
                                        <!-- <svg class="dropdown-toggle" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none" style="position: absolute; right: 6px; top: 7px; cursor: pointer;">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M20.8839 11.6161C21.3345 12.0667 21.3692 12.7758 20.9879 13.2661L20.8839 13.3839L15.8839 18.3839C15.4333 18.8345 14.7242 18.8692 14.2339 18.4879L14.1161 18.3839L9.11611 13.3839C8.62796 12.8957 8.62796 12.1043 9.11611 11.6161C9.56672 11.1655 10.2758 11.1308 10.7661 11.5121L10.8839 11.6161L15 15.7312L19.1161 11.6161C19.5667 11.1655 20.2758 11.1308 20.7661 11.5121L20.8839 11.6161Z" fill="#0A1629" />
                                        </svg> -->
                                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                            {% for employee in employees %}
                                            <li class="dropdown-item" style="cursor: pointer;"
                                                onclick="updateInput('{{employee.username}}', 'employee_duty', 'edit_request_employee_id', '{{employee.id}}')">
                                                {{employee.username}}
                                            </li>
                                            {% endfor %}

                                            <input value="{{custom_request.employee.id}}" type="hidden"
                                                id="edit_request_employee_id" name="edit_request_employee_id">
                                        </ul>
                                    </div>


                                </div>

                            </div>

                            <div class="col-md-5">
                                <div class="mb-3">
                                    <label for="request_clients" class="form-label pb-1">{% trans 'Clients' %}:</label>

                                    <div class="dropdown">
                                        <input value="{{custom_request.client_auto_id.name}}" type="text"
                                            class="form-control py-2" id="request_clients" name="request_clients"
                                            placeholder="{% trans 'Clients' %}"
                                            style="border-radius: 13px; background: transparent;" required readonly>
                                        <svg class="dropdown-toggle" id="dropdownMenuButton" data-bs-toggle="dropdown"
                                            aria-haspopup="true" aria-expanded="false"
                                            xmlns="http://www.w3.org/2000/svg" width="30" height="30"
                                            viewBox="0 0 30 30" fill="none"
                                            style="position: absolute; {% if LANGUAGE_CODE == 'ar' %}left: 6px; {% else %}right: 6px; {% endif %} top: 7px; cursor: pointer;">
                                            <path fill-rule="evenodd" clip-rule="evenodd"
                                                d="M20.8839 11.6161C21.3345 12.0667 21.3692 12.7758 20.9879 13.2661L20.8839 13.3839L15.8839 18.3839C15.4333 18.8345 14.7242 18.8692 14.2339 18.4879L14.1161 18.3839L9.11611 13.3839C8.62796 12.8957 8.62796 12.1043 9.11611 11.6161C9.56672 11.1655 10.2758 11.1308 10.7661 11.5121L10.8839 11.6161L15 15.7312L19.1161 11.6161C19.5667 11.1655 20.2758 11.1308 20.7661 11.5121L20.8839 11.6161Z"
                                                fill="#0A1629" />
                                        </svg>
                                        <ul id="client-ul" class="dropdown-menu pt-0"
                                            aria-labelledby="dropdownMenuButton">
                                            <input class="w-100 dropdown-item" type="text" id="client-Input"
                                                placeholder="{% trans 'Search' %}"
                                                style="padding: 0px; padding-top: 5px; padding-bottom: 5px; padding-left: 10px; border: 1px solid #ced4da;">
                                            {% for client in clients %}
                                            <li class="dropdown-item" style="cursor: pointer;"
                                                onclick="updateInput('{{client.name}}', 'request_clients', 'edit_request_client_id', '{{client.id}}')">
                                                {{client.name}}
                                            </li>
                                            {% endfor %}

                                            <input {{custom_request.client_auto_id.id}} type="hidden"
                                                id="edit_request_client_id" name="edit_request_client_id">
                                        </ul>
                                    </div>


                                </div>

                            </div>

                            <div class="col-md-10">
                                <div class="mb-3">
                                    <label for="request_duty" class="form-label pb-1">{% trans 'Duty' %}:</label>

                                    <div class="dropdown">
                                        <input value="{{custom_request.duty.title}}" type="text"
                                            class="form-control py-2" id="request_duty" name="request_duty"
                                            placeholder="{% trans 'Duty' %}"
                                            style="border-radius: 13px; background: transparent;" required readonly>
                                        <svg class="dropdown-toggle" id="dropdownMenuButton" data-bs-toggle="dropdown"
                                            aria-haspopup="true" aria-expanded="false"
                                            xmlns="http://www.w3.org/2000/svg" width="30" height="30"
                                            viewBox="0 0 30 30" fill="none"
                                            style="position: absolute; {% if LANGUAGE_CODE == 'ar' %}left: 6px; {% else %}right: 6px; {% endif %} top: 7px; cursor: pointer;">
                                            <path fill-rule="evenodd" clip-rule="evenodd"
                                                d="M20.8839 11.6161C21.3345 12.0667 21.3692 12.7758 20.9879 13.2661L20.8839 13.3839L15.8839 18.3839C15.4333 18.8345 14.7242 18.8692 14.2339 18.4879L14.1161 18.3839L9.11611 13.3839C8.62796 12.8957 8.62796 12.1043 9.11611 11.6161C9.56672 11.1655 10.2758 11.1308 10.7661 11.5121L10.8839 11.6161L15 15.7312L19.1161 11.6161C19.5667 11.1655 20.2758 11.1308 20.7661 11.5121L20.8839 11.6161Z"
                                                fill="#0A1629" />
                                        </svg>
                                        <ul id="duty-ul" class="dropdown-menu pt-0"
                                            aria-labelledby="dropdownMenuButton">
                                            <input class="w-100 dropdown-item" type="text" id="duty-Input"
                                                placeholder="{% trans 'Search' %}"
                                                style="padding: 0px; padding-top: 5px; padding-bottom: 5px; padding-left: 10px; border: 1px solid #ced4da;">
                                            {% for duty in dutys %}
                                            <li class="dropdown-item" style="cursor: pointer;"
                                                onclick="updateInput('{{duty.title}}', 'request_duty', 'edit_request_duty_id', '{{duty.id}}')">
                                                {{duty.title}}
                                            </li>
                                            {% endfor %}

                                            <input value="{{custom_request.duty.id}}" type="hidden"
                                                id="edit_request_duty_id" name="edit_request_duty_id">
                                        </ul>
                                    </div>


                                </div>

                            </div>

                        </div>

                        <div class="row pb-4">

                            <div class="col-md-5">
                                <div class="mb-3">
    <label for="request_method" class="form-label pb-1">{% trans 'Request Method' %}:</label>

                                    <div class="dropdown">
                                        <input value="{{custom_request.request_method.name}}" type="text"
                                            class="form-control py-2" id="request_method" name="request_method"
                                            placeholder="{% trans 'Request Method' %}"
                                            style="border-radius: 13px; background: transparent;" required readonly>
                                        <svg class="dropdown-toggle" id="dropdownMenuButton" data-bs-toggle="dropdown"
                                            aria-haspopup="true" aria-expanded="false"
                                            xmlns="http://www.w3.org/2000/svg" width="30" height="30"
                                            viewBox="0 0 30 30" fill="none"
                                            style="position: absolute; {% if LANGUAGE_CODE == 'ar' %}left: 6px; {% else %}right: 6px; {% endif %} top: 7px; cursor: pointer;">
                                            <path fill-rule="evenodd" clip-rule="evenodd"
                                                d="M20.8839 11.6161C21.3345 12.0667 21.3692 12.7758 20.9879 13.2661L20.8839 13.3839L15.8839 18.3839C15.4333 18.8345 14.7242 18.8692 14.2339 18.4879L14.1161 18.3839L9.11611 13.3839C8.62796 12.8957 8.62796 12.1043 9.11611 11.6161C9.56672 11.1655 10.2758 11.1308 10.7661 11.5121L10.8839 11.6161L15 15.7312L19.1161 11.6161C19.5667 11.1655 20.2758 11.1308 20.7661 11.5121L20.8839 11.6161Z"
                                                fill="#0A1629" />
                                        </svg>


                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                            xmlns="http://www.w3.org/2000/svg" data-bs-toggle="modal"
                                            data-bs-target="#methodmodal"
                                            style="position: absolute; {% if LANGUAGE_CODE == 'ar' %}left: 40px; {% else %}right: 40px; {% endif %} top: 10px; cursor: pointer;">
                                            <path
                                                d="M9 12H15M12 9V15M3 12C3 13.1819 3.23279 14.3522 3.68508 15.4442C4.13738 16.5361 4.80031 17.5282 5.63604 18.364C6.47177 19.1997 7.46392 19.8626 8.55585 20.3149C9.64778 20.7672 10.8181 21 12 21C13.1819 21 14.3522 20.7672 15.4442 20.3149C16.5361 19.8626 17.5282 19.1997 18.364 18.364C19.1997 17.5282 19.8626 16.5361 20.3149 15.4442C20.7672 14.3522 21 13.1819 21 12C21 9.61305 20.0518 7.32387 18.364 5.63604C16.6761 3.94821 14.3869 3 12 3C9.61305 3 7.32387 3.94821 5.63604 5.63604C3.94821 7.32387 3 9.61305 3 12Z"
                                                stroke="#0A1629" stroke-width="2" stroke-linecap="round"
                                                stroke-linejoin="round"></path>
                                        </svg>

                                        <ul id="request_method_ul" class="dropdown-menu pt-0"
                                            aria-labelledby="dropdownMenuButton">
                                            <input class="w-100 dropdown-item" type="text" id="request-method-Input"
                                                placeholder="{% trans 'Search' %}"
                                                style="padding: 0px; padding-top: 5px; padding-bottom: 5px; padding-left: 10px; border: 1px solid #ced4da;">
                                            {% for request_method in request_methods %}
                                            <li class="dropdown-item" style="cursor: pointer;"
                                                onclick="updateInput('{{request_method.name}}', 'request_method', 'edit_request_method_id', '{{request_method.id}}')">
                                                {{request_method.name}}
                                            </li>
                                            {% endfor %}

                                            <input value="{{custom_request.request_method.id}}" type="hidden"
                                                id="edit_request_method_id" name="edit_request_method_id">
                                        </ul>
                                    </div>


                                </div>

                            </div>

                            <div class="col-md-5">
                                <div class="mb-3">
    <label for="routine_routine" class="form-label pb-1">{% trans 'Departments' %}:</label>

                                    <div class="dropdown">
   <input value="{{custom_request.group.name}}" type="text" class="form-control py-2" id="routine_routine" name="routine_routine" placeholder="{% trans 'Departments' %}"
                                            style="border-radius: 13px; background: transparent;" required readonly>
                                        <svg class="dropdown-toggle" id="dropdownMenuButton" data-bs-toggle="dropdown"
                                            aria-haspopup="true" aria-expanded="false"
                                            xmlns="http://www.w3.org/2000/svg" width="30" height="30"
                                            viewBox="0 0 30 30" fill="none"
                                            style="position: absolute; {% if LANGUAGE_CODE == 'ar' %}left: 6px; {% else %}right: 6px; {% endif %} top: 7px; cursor: pointer;">
                                            <path fill-rule="evenodd" clip-rule="evenodd"
                                                d="M20.8839 11.6161C21.3345 12.0667 21.3692 12.7758 20.9879 13.2661L20.8839 13.3839L15.8839 18.3839C15.4333 18.8345 14.7242 18.8692 14.2339 18.4879L14.1161 18.3839L9.11611 13.3839C8.62796 12.8957 8.62796 12.1043 9.11611 11.6161C9.56672 11.1655 10.2758 11.1308 10.7661 11.5121L10.8839 11.6161L15 15.7312L19.1161 11.6161C19.5667 11.1655 20.2758 11.1308 20.7661 11.5121L20.8839 11.6161Z"
                                                fill="#0A1629" />
                                        </svg>
                                        <ul id="department-ul" class="dropdown-menu"
                                            aria-labelledby="dropdownMenuButton">
                                            <input class="w-100 dropdown-item" type="text" id="department-Input"
                                                placeholder="{% trans 'Search' %}"
                                                style="padding: 0px; padding-top: 5px; padding-bottom: 5px; padding-left: 10px; border: 1px solid #ced4da;">
                                            {% for department in groups %}
                                            <li class="dropdown-item" style="cursor: pointer;"
                                                onclick="updateInput('{{department.name}}', 'routine_routine', 'edit_employee_department_id', '{{department.id}}')">
                                                {{department.name}}
                                            </li>
                                            {% endfor %}

                                            <input value="{{custom_request.group.id}}" type="hidden"
                                                id="edit_employee_department_id" name="edit_employee_department_id">
                                        </ul>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <div class="row pb-4">

                            <div class="col-md-5">

                                <div class="mb-2">
                                    <label for="edit_request_time" class="form-label pb-1"
                                        style="font-weight: bold; color: #7D8592;">{% trans 'Request Time' %}:</label>

                                    <input value="{{ custom_request.request_time|date:'H:i' }}" type="time"
                                        class="form-control py-2" id="edit_request_time" name="edit_request_time"
                                        placeholder="2:10 Pm" style="border-radius: 13px;" required>
                                </div>
                            </div>
                            <div class="col-md-5">
                                <div class="mb-2">
                                    <label for="edit_request_date" class="form-label pb-1"
                                        style="font-weight: bold; color: #7D8592;">{% trans 'Request Date' %}:</label>


                                    <div class="dropdown">

                                        <input value="{{formatted_request_date}}" type="date" class="form-control py-2"
                                            id="edit_request_date" name="edit_request_date" placeholder="1/12/2024"
                                            style="border-radius: 13px;" required>

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row pb-4">

                            <div class="col-md-5">
                                <div class="mb-3">
    <label for="request_reason" class="form-label pb-1">{% trans 'Request Reason' %}:</label>

                                    <div class="dropdown">
                                        <input value="{{custom_request.request_reason.name}}" type="text"
                                            class="form-control py-2" id="request_reason" name="request_reason"
                                            placeholder="{% trans 'Request Reason' %}"
                                            style="border-radius: 13px; background: transparent;" required readonly>
                                        <svg class="dropdown-toggle" id="dropdownMenuButton" data-bs-toggle="dropdown"
                                            aria-haspopup="true" aria-expanded="false"
                                            xmlns="http://www.w3.org/2000/svg" width="30" height="30"
                                            viewBox="0 0 30 30" fill="none"
                                            style="position: absolute; {% if LANGUAGE_CODE == 'ar' %}left: 6px; {% else %}right: 6px; {% endif %} top: 7px; cursor: pointer;">
                                            <path fill-rule="evenodd" clip-rule="evenodd"
                                                d="M20.8839 11.6161C21.3345 12.0667 21.3692 12.7758 20.9879 13.2661L20.8839 13.3839L15.8839 18.3839C15.4333 18.8345 14.7242 18.8692 14.2339 18.4879L14.1161 18.3839L9.11611 13.3839C8.62796 12.8957 8.62796 12.1043 9.11611 11.6161C9.56672 11.1655 10.2758 11.1308 10.7661 11.5121L10.8839 11.6161L15 15.7312L19.1161 11.6161C19.5667 11.1655 20.2758 11.1308 20.7661 11.5121L20.8839 11.6161Z"
                                                fill="#0A1629" />
                                        </svg>


                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                            xmlns="http://www.w3.org/2000/svg" data-bs-toggle="modal"
                                            data-bs-target="#reasonmodal"
                                            style="position: absolute; {% if LANGUAGE_CODE == 'ar' %}left: 40px; {% else %}right: 40px; {% endif %} top: 10px; cursor: pointer;">
                                            <path
                                                d="M9 12H15M12 9V15M3 12C3 13.1819 3.23279 14.3522 3.68508 15.4442C4.13738 16.5361 4.80031 17.5282 5.63604 18.364C6.47177 19.1997 7.46392 19.8626 8.55585 20.3149C9.64778 20.7672 10.8181 21 12 21C13.1819 21 14.3522 20.7672 15.4442 20.3149C16.5361 19.8626 17.5282 19.1997 18.364 18.364C19.1997 17.5282 19.8626 16.5361 20.3149 15.4442C20.7672 14.3522 21 13.1819 21 12C21 9.61305 20.0518 7.32387 18.364 5.63604C16.6761 3.94821 14.3869 3 12 3C9.61305 3 7.32387 3.94821 5.63604 5.63604C3.94821 7.32387 3 9.61305 3 12Z"
                                                stroke="#0A1629" stroke-width="2" stroke-linecap="round"
                                                stroke-linejoin="round"></path>
                                        </svg>


                                        <ul id="request_reason_ul" class="dropdown-menu pt-0"
                                            aria-labelledby="dropdownMenuButton">
                                            <input class="w-100 dropdown-item" type="text" id="request-reason-Input"
                                                placeholder="{% trans 'Search' %}"
                                                style="padding: 0px; padding-top: 5px; padding-bottom: 5px; padding-left: 10px; border: 1px solid #ced4da;">
                                            {% for reason in reasons %}
                                            <li class="dropdown-item" style="cursor: pointer;"
                                                onclick="updateInput('{{reason.name}}', 'request_reason', 'edit_request_reason_id', '{{reason.id}}')">
                                                {{reason.name}}
                                            </li>
                                            {% endfor %}

                                            <input value="{{custom_request.request_reason.id}}" type="hidden"
                                                id="edit_request_reason_id" name="edit_request_reason_id">
                                        </ul>
                                    </div>
                                </div>
                            </div>


                            <div class="col-md-5">
                                <div class="mb-2">
                                    <label for="edit_request_corresponding_id" class="form-label pb-1"
                                        style="font-weight: bold; color: #7D8592;">{% trans 'Corresponding' %}:</label>


                                    <div class="dropdown">

                                        <input value="{{custom_request.corresponding_id}}" type="text"
                                            class="form-control py-2" id="edit_request_corresponding_id"
                                            name="edit_request_corresponding_id" placeholder="112233"
                                            style="border-radius: 13px;" required>

                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- <div class="row pb-4">
                            <div class="col-md-10">
                                <div class="mb-2">
                                    <label for="request_uids" class="form-label pb-1"
                                        style="font-weight: bold; color: #7D8592;">UIDs:</label>


                                    <div class="dropdown">

                                        <input type="text" class="form-control py-2" id="request_uids"
                                            name="request_uids" placeholder="Y7890" style="border-radius: 13px;" required>

                                    </div>
                                </div>
                            </div>


                        </div> -->

                        <div class="row">
                            <div class="col-md-10">
                                <div class="mb-3">
    <label for="request_note" class="form-label pb-1">{% trans 'Request Note' %}:</label>

                                    <div class="dropdown">
    <input value="{{custom_request.notes.content}}" type="text" class="form-control py-2" id="request_note" name="request_note" placeholder="{% trans 'Request Note' %}"
                                            style="border-radius: 13px; background: transparent;" required readonly>

                                        <input value="{{custom_request.notes.id}}" type="hidden"
                                            id="edit_request_note_id" name="edit_request_note_id">

                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                            xmlns="http://www.w3.org/2000/svg" data-bs-toggle="modal"
                                            data-bs-target="#notemodal"
                                            style="position: absolute; {% if LANGUAGE_CODE == 'ar' %}left: 40px; {% else %}right: 40px; {% endif %} top: 10px; cursor: pointer;">
                                            <path
                                                d="M9 12H15M12 9V15M3 12C3 13.1819 3.23279 14.3522 3.68508 15.4442C4.13738 16.5361 4.80031 17.5282 5.63604 18.364C6.47177 19.1997 7.46392 19.8626 8.55585 20.3149C9.64778 20.7672 10.8181 21 12 21C13.1819 21 14.3522 20.7672 15.4442 20.3149C16.5361 19.8626 17.5282 19.1997 18.364 18.364C19.1997 17.5282 19.8626 16.5361 20.3149 15.4442C20.7672 14.3522 21 13.1819 21 12C21 9.61305 20.0518 7.32387 18.364 5.63604C16.6761 3.94821 14.3869 3 12 3C9.61305 3 7.32387 3.94821 5.63604 5.63604C3.94821 7.32387 3 9.61305 3 12Z"
                                                stroke="#0A1629" stroke-width="2" stroke-linecap="round"
                                                stroke-linejoin="round"></path>
                                        </svg>



                                    </div>


                                </div>

                            </div>

                        </div>
                        
                        <!-- <div class="mt-3 form-label">
                            <p for="">{% trans 'Status' %}:</p>
                            <select class="col-md-10 py-2 px-2" name="status" id="edit_request_status"
                                style="border-radius: 13px; border:1px solid #ced4da;">
    <option class="form-control py-2" value="in" {% if custom_request.status == "in" %}selected{% endif %}>{% trans 'Inactive' %}</option>
    <option class="form-control py-2" value="ac" {% if custom_request.status == "ac" %}selected{% endif %}>{% trans 'Active' %}</option>
                            </select>
                        </div> -->

                    </div>
                    <div class="container-fluid">

                    </div>
                </div>

                <div class="pt-3">
                    <div class="employee-sheet-content custom-container bg-white"
                        style="border-radius: 15px; padding: 5%;">
                        <div class="d-flex" style=" gap: 90px;">
                            <div>
                                <p style="font-weight: bold; color: #7D8592;">{% trans 'Request Priority' %}</p>
                                <div class="checkboxes pt-4">
                                    <div class="true">
    <input type="checkbox" id="trueCheckbox" class="checkbox" {% if custom_request.is_high_priority %} checked {% endif %}>
                                        <label for="trueCheckbox" class="checkbox-label">{% trans 'True' %}</label>
                                    </div>

                                    <div class="false pt-2">
                                        <input type="checkbox" id="falseCheckbox" class="checkbox">
                                        <label for="falseCheckbox" class="checkbox-label">{% trans 'False' %}</label>
                                    </div>
                                </div>
                            </div>

                            <!-- <div>
                                <p style="font-weight: bold; color: #7D8592;">Request Requirements</p>
                                <div class="checkboxes pt-4">
                                    <div class="cases_log">
                                        <input type="checkbox" id="cases_logCheckbox" class="checkbox">
                                        <label for="cases_logCheckbox" class="checkbox-label">Cases Log</label>
                                    </div>
                                    <div class="traffic_log pt-2">
                                        <input type="checkbox" id="traffic_logCheckbox" class="checkbox">
                                        <label for="traffic_logCheckbox" class="checkbox-label">Trafic Log</label>
                                    </div>
                                    <div class="person_id pt-2">
                                        <input type="checkbox" id="person_idCheckbox" class="checkbox">
                                        <label for="person_idCheckbox" class="checkbox-label">Person ID</label>
                                    </div>
                                </div>

                            </div> -->
                        </div>

                        <div class="mt-4">
                            <p class="text-bold" id="error_message" style="font-weight: bold; color: red;"></p>

    <p class="text-bold" id="success_message" style="font-weight: bold; color: green; display:none;">{% trans 'Request updated successfully' %}</p>
                        </div>

                        <div class="pt-5">
                            <input class="btn btn-primary" type="submit" value="{% trans 'Save' %}"
                                style="width: 158px; height: 44px; border-radius: 16px; background-color: #4365D0; box-shadow: 0px 6px 12px 0px #3F8CFF43;">
                        </div>
                    </div>

                </div>
            </form>
        </div>

        <!-- Request Method Modal -->
        <form id="request_method_modal" action="#" method="post">
            {% csrf_token %}
            <div class="modal fade" id="methodmodal" tabindex="-1" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">{% trans 'Create' %} {% trans 'Request Method' %}
                            </h5>
                            <button type="button" class="btn-close {% if LANGUAGE_CODE == 'ar' %}m-0 {% endif %}" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label for="note_name">{% trans 'Name' %}:</label>
                                <input type="text" name="request_method_name" class="form-control"
                                    id="request_method_name" required>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button id="btnCloseRequestMethod" type="button" class="btn btn-secondary"
                                data-bs-dismiss="modal">{% trans 'Close' %}</button>
                            <button type="submit" class="btn btn-primary" id="submitReview">{% trans 'Save' %}</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <!-- Request Reason Reason -->
        <form id="request_reason_modal" action="#" method="post">
            {% csrf_token %}
            <div class="modal fade" id="reasonmodal" tabindex="-1" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">{% trans 'Create' %} {% trans 'Request Reason' %}
                            </h5>
                            <button type="button" class="btn-close {% if LANGUAGE_CODE == 'ar' %}m-0 {% endif %}" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label for="request_reason_name">{% trans 'Name' %}:</label>
                                <input type="text" name="request_reason_name" class="form-control"
                                    id="request_reason_name" required>
                            </div>
                        </div>
                        <div class="modal-footer">
    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% trans 'Close' %}</button>
                            <button type="submit" class="btn btn-primary" id="submitReview">{% trans 'Save' %}</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <!-- Request Note Modal -->
        <form id="request_note_modal" action="#" method="post">
            {% csrf_token %}
            <div class="modal fade" id="notemodal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLabel">{% trans 'Create' %} {% trans 'Note' %}
                            </h5>
                            <button type="button" class="btn-close {% if LANGUAGE_CODE == 'ar' %}m-0 {% endif %}" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label for="note_name">{% trans 'Name' %}:</label>
                                <input type="text" name="note_name" class="form-control" id="note_name" required>
                                <input id="note_user" type="hidden" value="{{custom_request.user.id}}">
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% trans 'Close' %}</button>
                            <button type="submit" class="btn btn-primary" id="submitReview">{% trans 'Save' %}</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>

    </div>

    <script>
        function updateInput(role, first_input, second_input, id) {
            document.getElementById(first_input).value = role;
            document.getElementById(second_input).value = id;
        }
    </script>
</div>
{% endblock %}

{% block script %}
<script>
    // Request Form Modal
    $("#request_method_modal").submit(function (event) {
        event.preventDefault();
        $.ajax({
            url: "/request_method_api",
            type: 'POST',
            data: {
                csrfmiddlewaretoken: '{{ csrf_token }}',
                name: document.getElementById('request_method_name').value
            },
            success: function (response) {
                $('#request_method_ul').append(`<li class="dropdown-item" style="cursor: pointer;"
    onclick="updateInput('${response.name}', 'request_method', 'edit_request_method_id', '${response.id}')"> ${response.name}
</li>`);
                console.log(response);
            },
            error: function (error) {
                console.log(error);
            }
        });
        return false;
    });

    // Request Reason Modal
    $("#request_reason_modal").submit(function (event) {
        event.preventDefault();
        $.ajax({
            url: "/request_reason_api",
            type: 'POST',
            data: {
                csrfmiddlewaretoken: '{{ csrf_token }}',
                name: document.getElementById('request_reason_name').value
            },
            success: function (response) {
                $('#request_reason_ul').append(`<li class="dropdown-item" style="cursor: pointer;"
    onclick="updateInput('${response.name}', 'request_reason', 'edit_request_reason_id', '${response.id}')"> ${response.name}
</li>`);
                console.log(response);
            },
            error: function (error) {
                console.log(error);
            }
        });
        return false;
    });

    // Request Note Modal
    $("#request_note_modal").submit(function (event) {
        event.preventDefault();
        $.ajax({
            url: "/request_note_api",
            type: 'POST',
            data: {
                csrfmiddlewaretoken: '{{ csrf_token }}',
                created_by: document.getElementById('note_user').value,
                content: document.getElementById('note_name').value
            },
            success: function (response) {
                document.getElementById('request_note').value = response.content;
                document.getElementById('edit_request_note_id').value = response.id;
                console.log(response);
            },
            error: function (error) {
                console.log(error);
            }
        });
        return false;
    });


    $(document).ready(function () {
        $('#trueCheckbox').click(function () {
            if ($(this).prop("checked")) {
                $('#falseCheckbox').prop("checked", false);
            }
        });

        $('#falseCheckbox').click(function () {
            if ($(this).prop("checked")) {
                $('#trueCheckbox').prop("checked", false);
            }
        });

        $("#request_form").submit(function (event) {
            event.preventDefault();

            $.ajax({
                url: "/request_form/{{custom_request.id}}/",
                type: 'PUT',
                data: {
                    csrfmiddlewaretoken: '{{ csrf_token }}',
                    duty: $('#edit_request_duty_id').val(),
                    employee: $('#edit_request_employee_id').val(),
                    clinet_auto_id: $('#edit_request_client_id').val(),
                    group: $('#edit_employee_department_id').val(),
                    notes: $('#edit_request_note_id').val(),
                    request_date: $('#edit_request_date').val(),
                    request_time: $('#edit_request_time').val(),
                    request_method: $('#edit_request_method_id').val(),
                    corresponding_id: $('#edit_request_corresponding_id').val(),
                    request_reason: $('#edit_request_reason_id').val(),
                    is_high_priority: $('#trueCheckbox').prop('checked'),
                    status: $('#edit_request_status option:selected').val()
                },
                success: function (response) {
                    document.getElementById('success_message').style.display = "block";
                    document.getElementById('error_message').style.display = "none";
                    console.log(response);
                },
                error: function (error) {
                    document.getElementById('error_message').style.display = "block";
                    document.getElementById('error_message').innerHTML = error.responseText;
                    document.getElementById('success_message').style.display = "none";
                    console.error(error);
                }
            });
            return false;
        });
    });

    // $("#information_form").submit(function (event) {
    //  event.preventDefault();

    // var formData = new FormData();
    // formData.append('file', $('#information_form_file')[0].files[0]);
    // formData.append('uploaded_by', '1');
    // formData.append('csrfmiddlewaretoken', '{{ csrf_token }}');

    // $.ajax({
    // url: "/information_form_api",
    // type: 'POST',
    // data: {
    // csrfmiddlewaretoken: '{{ csrf_token }}',
    // file: $('#information_form_file')[0].files[0],
    // uploaded_by: '{{request.user.id}}'
    // },
    // success: function (response) {
    // console.log(response);
    // },
    // error: function (error) {
    // console.error(error);
    //  }
    // });

    // return false;
    // });





    $(document).ready(function () {
        $('#cases_logCheckbox, #traffic_logCheckbox, #person_idCheckbox').click(function () {
            if ($('#person_idCheckbox').prop("checked") == true) {
                $('#cases_logCheckbox').prop("checked", false);
                $('#traffic_logCheckbox').prop("checked", false);
                $('#pills-role-permission-tab').css("display", "none");
                $('#pills-permission-tab').css("display", "block");

            } else if ($('#cases_logCheckbox').prop("checked") == true) {
                $('#pills-permission-tab').css("display", "none");
                $('#pills-role-permission-tab').css("display", "block");
            } else if ($('#traffic_logCheckbox').prop("checked") == true) {
                $('#pills-permission-tab').css("display", "none");
                $('#pills-role-permission-tab').css("display", "block");
            }
            else {
                $('#pills-permission-tab').css("display", "block");
                $('#pills-role-permission-tab').css("display", "block");
            }
        });
    });


    $(document).ready(function () {
        $("#client-Input").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#client-ul li").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                console.log($(this).toggle($(this).text().toLowerCase().indexOf(value) > -1))
            });
        });
        $("#duty-Input").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#duty-ul li").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                console.log($(this).toggle($(this).text().toLowerCase().indexOf(value) > -1))
            });
        });
        $("#request-method-Input").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#request_method_ul li").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                console.log($(this).toggle($(this).text().toLowerCase().indexOf(value) > -1))
            });
        });
        $("#department-Input").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#department-ul li").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                console.log($(this).toggle($(this).text().toLowerCase().indexOf(value) > -1))
            });
        });
        $("#request-reason-Input").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#request_reason_ul li").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                console.log($(this).toggle($(this).text().toLowerCase().indexOf(value) > -1))
            });
        });
    });
</script>
{% endblock %}